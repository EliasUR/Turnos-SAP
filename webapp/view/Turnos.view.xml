<mvc:View xmlns:control="sap.gantt.control" controllerName="com.softtek.aca2024er.controller.Turnos"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true" xmlns="sap.m" xmlns:tnt="sap.tnt"
    xmlns:f="sap.f" xmlns:fb="sap.ui.comp.filterbar" xmlns:core="sap.ui.core">    
    <tnt:ToolPage id="page">
        <tnt:header>
			<core:Fragment id="nav" fragmentName="com.softtek.aca2024er.view.fragments.Nav" type="XML"/>
		</tnt:header>
        <tnt:sideContent>
			<core:Fragment id="sidebar" fragmentName="com.softtek.aca2024er.view.fragments.Sidebar" type="XML"/>
        </tnt:sideContent>
        <tnt:mainContents>
            <f:DynamicPage showFooter="true">
                <f:title>
                    <f:DynamicPageTitle>
                        <f:heading> 
                            <Title wrapping="true"
                                text="Turnos asignados a {Nombre} {Apellido}."/>
                        </f:heading>
                    </f:DynamicPageTitle>
                </f:title>
                <f:header>
                    <f:DynamicPageHeader>
                        <Title text="Datos Personales"></Title>
                        <HBox width="100%" justifyContent="SpaceBetween" alignItems="Start" wrap="Wrap">
                            <List showSeparators="Inner">
                                <StandardListItem title="Legajo" description="{Legajo}"/>
                                <StandardListItem title="Nombre Completo" description="{Apellido}, {Nombre}"/>
                            </List>
                            <VBox>
                                <List showSeparators="Inner" class="sapUiNoContentPadding">
                                    <StandardListItem title="Especialidad" 
                                        description="{ToEspecialidad/Nombre}"/>
                                    <StandardListItem title="Jornada Laboral"></StandardListItem>
                                </List>
                                <HBox >
                                
                                    <TimePicker id="ingreso" displayFormat="HH:mm" change="onInputChange"
                                        class="sapUiTinyMarginEnd"
                                        value="{ 
                                            path: 'HoraDeIngreso', 
                                            type: 'sap.ui.model.odata.type.Time',
                                            formatOptions: {
                                                source: { pattern: 'PTHHHMMMSSS' },
                                                pattern: 'HH:mm'
                                            }
                                        }"/>
                                    <TimePicker id="egreso" displayFormat="HH:mm" change="onInputChange"
                                        value="{ 
                                            path: 'HoraDeEgreso', 
                                            type: 'sap.ui.model.odata.type.Time',
                                            formatOptions: {
                                                source: { pattern: 'PTHHHMMMSSS' },
                                                pattern: 'HH:mm'
                                            }
                                        }"/>
                                </HBox>
                                <HBox justifyContent="End" width="100%">
                                    <Button id="SaveEdit" icon="sap-icon://away" class="sapUiTinyMarginEnd"
                                        enabled="false"
                                        type="Accept" press="onSaveChanges" text="Cambiar"/>
                                    <Button id="CancelEdit" icon="sap-icon://decline" enabled="false"
                                        type="Reject" press="onCancelChanges" text="Cancelar"/>
                                </HBox>
                            </VBox>
                        </HBox>
                    </f:DynamicPageHeader>
                </f:header>

                <f:content>
                    <Table id="turnos" growing="true" growingThreshold="15" items="{path:'ToTurnoSet'}"> 
                        <headerToolbar >
                            <OverflowToolbar >
                                <content>
                                    <ToolbarSpacer/>
                                    <Button id="clearFilters" icon="sap-icon://clear-filter" 
                                        text="Borrar filtros" press="onClearFilters" type="Emphasized"/>
                                    <Button id="createMedico" icon="sap-icon://clinical-order" 
                                        text="Nuevo Turno" press="onCreate" type="Accept"/>
                                </content>
                            </OverflowToolbar>
                        </headerToolbar>
                        <columns>
                            <Column mergeDuplicates="true" hAlign="Begin" minScreenWidth="Phone" demandPopin="true">
                                <Text text="Fecha del Turno"></Text>
                            </Column>
                            <Column hAlign="Center" minScreenWidth="small" demandPopin="true">
                                <Text text="Horario del turno"></Text>
                            </Column>
                            <Column hAlign="Center" minScreenWidth="XXLarge" demandPopin="true">
                                <Text text="NÂ° Turno"></Text>
                            </Column>
                            <Column hAlign="Begin" minScreenWidth="Tablet" demandPopin="true">
                                <Text text="Dni"></Text>
                            </Column>
                            <Column hAlign="Begin" minScreenWidth="Desktop" demandPopin="true">
                                <Text text="Paciente"></Text>
                            </Column>
                            <Column hAlign="Center" minScreenWidth="XSmall" demandPopin="true">
                                <Text text="Acciones"></Text>
                            </Column>
                            
                        </columns>
                        <items>
                            <ColumnListItem vAlign="Middle">
                                <cells>
                                    <Text text="{
                                        path: 'FechaTurno',
                                        type: 'sap.ui.model.type.Date',
                                        formatOptions: {
                                            pattern: 'dd/MM/yyyy'
                                        }
                                    }"/>
                                    <Text text="{
                                        path: 'HoraTurno', 
                                        type: 'sap.ui.model.odata.type.Time',
                                        formatOptions: {
                                            source: { pattern: 'PTHHHMMMSSS' },
                                            pattern: 'HH:mm'
                                        }   
                                    } hs."/>
                                    <Text text="{IdTurno}"/>
                                    <Text text="{DniPaciente}"/>
                                    <Text text="{NombrePaciente}"></Text>
                                    <FlexBox justifyContent="Center" alignItems="Center">
                                        <Button id="postergar" icon="sap-icon://away" press="onEdit"
                                            type="Default" text="Postergar" class="sapUiTinyMarginEnd"/>
                                        <Button id="deleteMedico" icon="sap-icon://delete" press="onDelete" 
                                            type="Reject"/>
                                    </FlexBox>
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </f:content>
            </f:DynamicPage>
		</tnt:mainContents>
    </tnt:ToolPage>
    
    
</mvc:View>